---
layout: page
title: Menus
permalink: "menu.html"
---

Menus
=====

Menus are generated from the MPTT tree, using the MPTT template tag.


How to use it
-------------

In your template, import the mptt tags:

	{% load mptt_tags %}

### Retrieve page nodes

You can use the template tage to get the full tree for a specific model:

	{% full_tree_for_model cmsbase.Page as pages %}

If you want to build a menu tree from a specific page, you can retrieve the page using the `get_page_by_unique_identifier` tag, and call the children of that page using `page.get_child_pages`. You then render the menu using the `recursetree` tag:

	{% get_page_by_unique_identifier 'my-page' as page %}
	{% recursetree page.get_child_pages %}
		...
	{% endrecursetree %}

### Render menu from the nodes

To create a navigation list, use the following code passing on a MPTT tree node (nodes):

	<ul>
	    {% recursetree nodes %}
	        {% if node.get_published %}<li>
	            <a href="{{node.get_absolute_url}}">
	            	{{node.get_published.translated.title}}
	            </a>
	            {% if not node.is_leaf_node %}
	                <ul class="children">
	                    {{ children }}
	                </ul>
	            {% endif %}
	        </li>{% endif %}
	    {% endrecursetree %}
	</ul>

Getting the node in Python:

	nodes = page_original.get_root().get_descendants(include_self=True)
	
It first get the root of the current page instance, then look up it root node and get all descendants. This will generate a full tree.

!!! note "Please note"
	The tree can ony be generated by "original" pages, the template output should lookup the "published" version to write the approved published content. Hence:
	
		{{node.get_published.translated.title}}
	
The "translated" method automatically lookup the current language set in your session to render the right translation.


Get the full tree
-----------------

You can use the template tage to get the full tree for a specific model:

	{% full_tree_for_model cmsbase.Page as pages %}