{% extends 'admin/change_form.html' %}
{% load i18n admin_static admin_modify %}
{% load url from future %}
{% load admin_urls %}

{% block content_title %}{% if original %}<div class="inner"><h1>{{ original|truncatewords:"18" }}</h1></div>{% else %}<div class="inner"><h1>{% trans "New page" %}</h1></div>{% endif %}{% endblock %}

{% block body_onload %}{% endblock %}
{% block content %}<div id="content-main" class="">

<form enctype="multipart/form-data" action="{{ form_url }}" method="post" id="{{ opts.module_name }}_form" class="form-horizontal">{% csrf_token %}{% block form_top %}{% endblock %}
<div>
{% if is_popup %}<input type="hidden" name="_popup" value="1" />{% endif %}
{% if save_on_top %}{% block submit_buttons_top %}{% submit_row %}{% endblock %}{% endif %}
{% if errors %}
    <p class="alert alert-danger">
    {% blocktrans count counter=errors|length %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
    </p>
    {{ adminform.form.non_field_errors }}
{% endif %}

{% block field_sets %}
<div class="row-fluid">
	<div class="span3 tabs-left">
		<ul class="nav nav-tabs" id="accommodation_tab">
		{% for fieldset in adminform %}
			<li class="{% if forloop.first %}active{% endif %}"><a href="#{{fieldset.name|slugify}}" data-toggle="tab" id="tab_{{fieldset.name|slugify}}">{{fieldset.name}}{% if fieldset.description %}<span class="description">{{fieldset.description}}</span>{% endif %}</a></li>
		{% endfor %}
		<li><a href="#translations-group" data-toggle="tab">{% trans "Content" %}<span class="description">{% trans "Manage all content translations" %}</span></a></li>
		<li><a href="#pageimage_set-group" data-toggle="tab">{% trans "Images" %}<span class="description">{% trans "Image upload management" %}</span></a></li>
		</ul>
	</div>
	<div class="span9">
		<div class="tab-content">
		{% for fieldset in adminform %}
			{% include "admin/includes/fieldset-tabbed.html" %}
		{% endfor %}
		
		{% for inline_admin_formset in inline_admin_formsets %}
		    {% include inline_admin_formset.opts.template %}
		{% endfor %}
		</div>
	</div>
</div>


{% endblock %}

{% block after_field_sets %}{% endblock %}

{% block inline_field_sets %}

{% endblock %}

{% block after_related_objects %}{% endblock %}

{% block submit_buttons_bottom %}{% submit_row %}{% endblock %}

{% if adminform and add %}
   <script type="text/javascript">document.getElementById("{{ adminform.first_field.id_for_label }}").focus();</script>
{% endif %}

{# JavaScript for prepopulated fields #}
{% prepopulated_fields_js %}

</div>
</form></div>
{% endblock %}

{% block footer_script %}

<script>
$(document).ready(function(){
	if(window.location.hash) {
		//set the value as a variable, and remove the #
		var hash_value = window.location.hash.replace('#', '');

		$('.nav-tabs a[href="#'+hash_value+'"]').tab('show');

		//if(hash_value == 'location') load_map();

		
	}

	$('.nav-tabs a').click(function(){
		window.location.hash = $(this).attr('href');
	});
});
</script>
{% endblock %}